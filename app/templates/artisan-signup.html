{% extends 'layout.html' %}
{% block content %}


<div style="display: flex; justify-content: center; margin-top: 40px;">
  {% include 'msgFlash.html' %}
</div>

<!-- Hero -->
<section class="artisan-hero">
  <div class="hero-inner">
    <span class="hero-badge">Artisan Signup Form</span>
    <h1>Join 47Builders as an Artisan</h1>
    <p>
      Get access to high value projects from diaspora clients, build your reputation,
      and get paid securely through milestone based payments.
    </p>

  </div>
  <div style="padding-top: 50px;">
    <span class="hero-badge">All information are required for a successful registeration</span>
  </div>

</section>


<section class="auth-section">
  <div class="auth-card">
    <form method="POST" enctype="multipart/form-data" id="artisanSignupForm" class="form auth-form">
      <div class="profile-upload">
        <label for="profileInput" class="profile-label">
          <div class="profile-preview" id="profilePreview">
            <span>Upload Profile Photo</span>
          </div>
          <input type="file" id="profileInput" name="profile" accept="image/*" required />
        </label>
      </div>

      <div class="formRow">
        <input type="text" name="firstName" class="input" placeholder="First Name" required />
        <input type="text" name="lastName" class="input" placeholder="Last Name" required />
        <input type="text" name="businessName" class="input" placeholder="Business Name (optional)" />
      </div>

      <div class="formRow">
        <input type="tel" name="phone" class="input" placeholder="Phone Number (WhatsApp enabled)" required />
        <input type="email" name="email" class="input" placeholder="Email" required />
        <select name="gender" class="input" required>
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>

        </select>
      </div>

      <div class="formRow">
        <input type="text" name="location" class="input" placeholder="Base Location (City, State)" required />
        <select name="primaryTrade" class="input" required>
          <option value="">Primary Trade</option>
          <option value="Electrician">Electrician</option>
          <option value="Plumber">Plumber</option>
          <option value="Carpenter">Carpenter and Furniture Maker</option>
          <option value="Tiler">Tiler and Finishing Expert</option>
          <option value="Painter">Painter and Interior Finisher</option>
          <option value="Welder">Welder and Metal Fabricator</option>
          <option value="Bricklayer">Bricklayer and Mason</option>
          <option value="Other">Other Construction Trade</option>
        </select>


      </div>

      <div class="formRow">

      </div>

      <div class="formRow">
        <input type="number" name="experienceYears" class="input" placeholder="Years of Experience" min="0" required />
        <input type="text" name="ninOrId" class="input" placeholder="NIN or Government ID Number" required />
      </div>

      <div class="formRow">
        <input type="text" name="portfolioLink" class="input"
          placeholder="Portfolio Link (Instagram, Google Drive, website)" />
        <input type="text" name="referralCode" class="input" placeholder="Referral Code (if any)" />
      </div>

      <div class="formRow">
        <input type="password" name="password" class="input" placeholder="Password" required />
        <input type="password" name="confirmPassword" class="input" placeholder="Confirm Password" required />
      </div>

      <textarea name="about" class="textarea"
        placeholder="Tell us about your work, typical project size, and the locations you serve." required>
      </textarea>

      <div class="auth-checkbox-row">
        <label class="checkbox-label">
          <input type="checkbox" name="acceptVerification" required />
          <span>I agree to provide valid documents for KYC and project verification.</span>
        </label>
      </div>

      <div class="auth-checkbox-row">
        <label class="checkbox-label">
          <input type="checkbox" name="acceptTerms" required />
          <span>
            I accept the 47Builders Terms of Service and understand that payments
            are milestone based and held in escrow.
          </span>
        </label>
      </div>

      <button type="submit" class="primaryButton auth-submit">
        Submit Application
      </button>

      <p class="formMessage" id="artisanSignupMessage"></p>
    </form>

    <p class="auth-hint">
      Already verified with 47Builders,
      <a href="{{url_for('artisan_login_page')}}">Login Here</a>.
    </p>
  </div>
</section>

<script>
  const profileInput = document.getElementById("profileInput");
  const profilePreview = document.getElementById("profilePreview");

  profileInput.addEventListener("change", function () {
    const file = this.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        profilePreview.innerHTML = `<img src="${e.target.result}" />`;
      };
      reader.readAsDataURL(file);
    }
  });
</script>

{% endblock content %}